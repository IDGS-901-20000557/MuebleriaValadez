<div class="body">
    <div class="container"><br><br>
      <div class="row">
        <div class="form-group col-12 col-md-4 mt-4">
          <!-- Código del formulario de insert de insumos -->
          <div class="card shadow rounded">
            <div id="title" class="card-header text-center">Sucursales</div>
            <div class="card-body">
              <label for="estado" class="form-label mt-2">Estado</label>
              <select [(ngModel)]="selectedEstado" (ngModelChange)="getCiudadesByEstado()" class="form-control" id="estado">
                <option value="" disabled selected>Selecciona un estado</option>
                <option *ngFor="let estado of estados" [value]="estado">{{ estado }}</option>
              </select>

              <label for="ciudad" class="form-label mt-2">Ciudad</label>
              <select [(ngModel)]="selectedCiudad" (ngModelChange)="getCodigosPostalesByCiudad()" class="form-control" id="ciudad">
                <option value="" disabled selected>Selecciona una ciudad</option>
                <option *ngFor="let ciudad of ciudades" [value]="ciudad">{{ ciudad }}</option>
              </select>

              <label for="codigoPostal" class="form-label mt-2">Código Postal</label>
              <select [(ngModel)]="selectedCodigoPostal" (ngModelChange)="getColoniasByCodigoPostal()" class="form-control" id="codigoPostal">
                <option value="0" disabled selected>Selecciona un código postal</option>
                <option *ngFor="let cp of codigosPostales" [value]="cp">{{ cp }}</option>
              </select>

              <label for="colonia" class="form-label mt-2">Colonia</label>
              <select [(ngModel)]="selectedColonia" class="form-control" id="colonia">
                <option value="" disabled selected>Selecciona una colonia</option>
                <option *ngFor="let colonia of colonias" [value]="colonia.idDomicilio">{{ colonia.colonia }}</option>
              </select> 
              
              <form action="" [formGroup]="sucursalForm">
                <label for="razonSocial" class="form-label mt-2">Razón Social</label>
                <input type="text" class="form-control" formControlName="razonSocial" id="razonSocial" name="razonSocial" [(ngModel)]="nuevaSucursal.razonSocial" required/>

                <label for="calle" class="form-label mt-2">Calle</label>
                <input type="text" class="form-control" formControlName="calle" id="calle" name="calle" [(ngModel)]="nuevaSucursal.direccion.calle" required/>
                
                <label for="noExt" class="form-label mt-2">No. Ext</label>
                <input type="number" class="form-control" formControlName="noExt" id="noExt" name="noExt" [(ngModel)]="nuevaSucursal.direccion.noExt" required/>
                
                <label for="noInt" class="form-label mt-2">No. Int (Opcional)</label>
                <input type="number" class="form-control" formControlName="noInt" id="noInt" name="noInt" [(ngModel)]="nuevaSucursal.direccion.noInt"/>
                
                <button class="btn btn-success mt-2 form-control" (click)="insertNewSucursal()">
                  <i class="fas fa-save"></i> Guardar
                </button>
              </form>
            </div>
          </div>
        </div>
        <div class="form-group col-12 col-md-8 mt-4">
          <table class="table table-striped table-hover table-bordered" cellspacing="0" width="100%">
            <thead>
              <tr class="text-center">
                <th>ID</th>
                <th>Razón Social</th>
                <th>Calle</th>
                <th>No. Ext</th>
                <th>No. Int</th>
                <th>Detalles</th>
              </tr>
            </thead>
            <tbody class="text-center">
              <tr *ngFor="let sucursal of sucursales">
                <td>{{ sucursal.idSucursal }}</td>
                <td>{{ sucursal.razonSocial }}</td>
                <td>{{ sucursal.direccion.calle }}</td>
                <td>{{ sucursal.direccion.noExt }}</td>
                <td>{{ sucursal.direccion.noInt }} </td>
                <td class="text-center">
                  <div class="d-flex">
                    <button id="btnUpdate" class="btn" (click)="editarSucursal(sucursal)">
                      <i class="fas fa-eye"></i>
                    </button>
                    <button id="btnDelete" class="btn btn-danger" (click)="deleteSucursal(sucursal.idSucursal)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div><br><br>
</div>
  
